(this["webpackJsonpstar-db"]=this["webpackJsonpstar-db"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=n(22),i=n.n(s),l=n(4),o=n(6),d=n(8),u=n(7),j=n(12),m=n(2),h=(n(29),function(){return Object(a.jsxs)("div",{className:"error-indicator",children:[Object(a.jsx)("span",{className:"boom",children:"BOOM!"}),Object(a.jsx)("span",{children:"Something has gone terribly wrong"}),Object(a.jsx)("span",{children:"(but we already sent droids to fix it)"})]})}),p=h,b=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(o.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(a.jsx)(p,{}):this.props.children}}]),n}(r.Component),f=(n(30),function(){return Object(a.jsxs)("header",{className:"header d-flex",children:[Object(a.jsx)("h1",{className:"header__logo",children:Object(a.jsx)(j.b,{className:"header__logo-link",to:"/",children:"StarDB"})}),Object(a.jsx)("nav",{className:"header__nav",children:Object(a.jsxs)("ul",{className:"header__menu-list d-flex",children:[Object(a.jsx)("li",{className:"header__menu-item",children:Object(a.jsx)(j.b,{className:"header__menu-link",to:"/people/",children:"Persons"})}),Object(a.jsx)("li",{className:"header__menu-item",children:Object(a.jsx)(j.b,{className:"header__menu-link",to:"/planets/",children:"Planets"})}),Object(a.jsx)("li",{className:"header__menu-item",children:Object(a.jsx)(j.b,{className:"header__menu-link",to:"/starships/",children:"Starships"})})]})})]})}),O=n(5),x=n.n(O),g=n(13),v=function e(){var t=this;Object(l.a)(this,e),this._apiBase="https://swapi.dev/api",this._imageUrlBase="https://starwars-visualguide.com/assets/img",this.getResource=function(){var e=Object(g.a)(x.a.mark((function e(n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n,", received ").concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPeople=Object(g.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/");case 2:return n=e.sent,e.abrupt("return",n.results.map((function(e){return t._transformPersonData(e)})));case 4:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(g.a)(x.a.mark((function e(n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformPersonData(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPlanets=Object(g.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/");case 2:return n=e.sent,e.abrupt("return",n.results.map((function(e){return t._transformPlanetData(e)})));case 4:case"end":return e.stop()}}),e)}))),this.getPlanet=function(){var e=Object(g.a)(x.a.mark((function e(n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformPlanetData(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllStarships=Object(g.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/");case 2:return n=e.sent,e.abrupt("return",n.results.map((function(e){return t._transformStarshipData(e)})));case 4:case"end":return e.stop()}}),e)}))),this.getStarship=function(){var e=Object(g.a)(x.a.mark((function e(n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/".concat(n,"/"));case 2:return a=e.sent,e.abrupt("return",t._transformStarshipData(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPersonImage=function(e){var n=e.id;return"".concat(t._imageUrlBase,"/characters/").concat(n,".jpg")},this.getPlanetImage=function(e){var n=e.id;return"".concat(t._imageUrlBase,"/planets/").concat(n,".jpg")},this.getStarshipImage=function(e){var n=e.id;return"".concat(t._imageUrlBase,"/starships/").concat(n,".jpg")},this._extractId=function(e){return e.url.match(/\/([0-9]*)\/$/)[1]},this._transformPlanetData=function(e){return{id:t._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter}},this._transformPersonData=function(e){return{id:t._extractId(e),name:e.name,gender:e.gender,birthYear:e.birth_year,eyeColor:e.eye_color}},this._transformStarshipData=function(e){return{id:t._extractId(e),name:e.name,model:e.model,manufacturer:e.manufacturer,costInCredits:e.cost_in_credits,length:e.length,crew:e.crew,passengers:e.passengers,cargoCapacity:e.cargo_capacity}}},_=(n(37),function(){return Object(a.jsx)("div",{className:"loadingio-spinner-double-ring-z3dcm6xcrq",children:Object(a.jsxs)("div",{className:"ldio-1c9d5agblt7",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{})})]})})}),w=(n(38),function(e){var t=e.planet,n=t.id,r=t.name,s=t.population,i=t.rotationPeriod,l=t.diameter;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("img",{className:"random-planet__img",width:"100",height:"100",alt:"Planet",src:"https://starwars-visualguide.com/assets/img/planets/".concat(n,".jpg")}),Object(a.jsxs)("div",{className:"random-planet__info",children:[Object(a.jsx)("h2",{className:"random-planet__title",children:r}),Object(a.jsxs)("ul",{className:"random-planet__desc-list",children:[Object(a.jsxs)("li",{className:"random-planet__desc-item",children:[Object(a.jsx)("span",{className:"random-planet__desc-text",children:"Population"}),Object(a.jsx)("span",{className:"random-planet__desc-value",children:s})]}),Object(a.jsxs)("li",{className:"random-planet__desc-item",children:[Object(a.jsx)("span",{className:"random-planet__desc-text",children:"Rotation Period"}),Object(a.jsx)("span",{className:"random-planet__desc-value",children:i})]}),Object(a.jsxs)("li",{className:"random-planet__desc-item",children:[Object(a.jsx)("span",{className:"random-planet__desc-text",children:"Diameter"}),Object(a.jsx)("span",{className:"random-planet__desc-value",children:l})]})]})]})]})}),N=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).swapi=new v,e.state={planet:{},loading:!0},e.onPlanetLoaded=function(t){e.setState({planet:t,loading:!1,error:!1})},e.onError=function(t){e.setState({error:!0,loading:!1})},e.updatePlanet=function(){var t=Math.floor(18*Math.random())+2;e.swapi.getPlanet(t).then(e.onPlanetLoaded).catch(e.onError)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updatePlanet(),this.interval=setInterval(this.updatePlanet,5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.planet,n=e.loading,r=e.error,c=!(n||r),s=r?Object(a.jsx)(h,{}):null,i=n?Object(a.jsx)(_,{}):null,l=c?Object(a.jsx)(w,{planet:t}):null;return Object(a.jsxs)("section",{className:"random-planet d-flex",children:[s,i,l]})}}]),n}(r.Component),I=n(20),y=_,P=(n(39),function(e){var t=e.itemList,n=e.onItemSelected,r=e.renderItem,c=t.map((function(e){var t=r(e);return Object(a.jsx)("li",{className:"list-group-item",onClick:function(){n(e.id)},children:t},e.id)}));return Object(a.jsx)("ul",{className:"item-list list-group",children:c})}),k=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.loading,r=e.error,s=e.onItemSelected,i=e.renderItem,l=!(n||r),o=r?Object(a.jsx)(p,{}):null,d=n?Object(a.jsx)(y,{}):null,u=l?Object(a.jsx)(P,{itemList:t,onItemSelected:s,renderItem:i}):null;return Object(a.jsxs)(c.a.Fragment,{children:[o,d,u]})}}]),n}(r.Component),S=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:null,loading:!0,error:!1},e.onItemListLoaded=function(t){e.setState({data:t,loading:!1,error:!1})},e.onError=function(t){e.setState({error:!0,loading:!1})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getData)().then(this.onItemListLoaded).catch(this.onError)}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.loading,r=e.error;return Object(a.jsx)(k,Object(I.a)(Object(I.a)({},this.props),{},{data:t,loading:n,error:r}))}}]),n}(r.Component),D=(n(40),function(e){var t=e.item,n=e.field,r=e.label;return Object(a.jsxs)("li",{className:"item-card__desc-item",children:[Object(a.jsx)("span",{className:"item-card__desc-text",children:r}),Object(a.jsx)("span",{className:"item-card__desc-value",children:t[n]})]})}),C=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).swapi=new v,e.state={item:null,image:null,loading:!0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updateItem()}},{key:"componentDidUpdate",value:function(e){this.props.itemId!==e.itemId&&this.updateItem()}},{key:"updateItem",value:function(){var e=this,t=this.props,n=t.itemId,a=t.getData,r=t.getImageUrl;n&&a(n).then((function(t){e.setState({item:t,image:r(t),loading:!1})}))}},{key:"render",value:function(){if(!this.state.item)return Object(a.jsx)("span",{children:"Select an item from a list"});var e=this.state.item.name,t=this.state,n=t.item,r=t.image,s=t.loading?Object(a.jsx)(y,{}):null;return Object(a.jsxs)(c.a.Fragment,{children:[s,Object(a.jsxs)("div",{className:"item-card d-flex",children:[Object(a.jsx)("img",{className:"item-card__img",src:r,width:"100",height:"100",alt:"Item"}),Object(a.jsxs)("div",{className:"item-card__info",children:[Object(a.jsx)("h2",{className:"item-card__title",children:e}),Object(a.jsx)("ul",{className:"item-card__desc-list",children:c.a.Children.map(this.props.children,(function(e){return c.a.cloneElement(e,{item:n})}))})]})]})]})}}]),n}(r.Component),A=Object(m.e)((function(e){var t=e.history,n=e.match,r=new v,c=n.params.id;return Object(a.jsx)(b,{children:Object(a.jsxs)("div",{className:"row mb2",children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(S,{onItemSelected:function(e){return t.push(e)},getData:r.getAllPeople,renderItem:function(e){return"".concat(e.name," (").concat(e.gender,", ").concat(e.birthYear,")")}})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsxs)(C,{itemId:c,getData:r.getPerson,getImageUrl:r.getPersonImage,children:[Object(a.jsx)(D,{field:"gender",label:"Gender"}),Object(a.jsx)(D,{field:"eyeColor",label:"Eye color"})]})})]})})})),E=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).swapi=new v,e.state={selectedPlanet:null},e.onPlanetSelected=function(t){e.setState({selectedPlanet:t})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(a.jsx)(b,{children:Object(a.jsxs)("div",{className:"row mb2",children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(S,{onItemSelected:this.onPlanetSelected,getData:this.swapi.getAllPlanets,renderItem:function(e){return"".concat(e.name," (").concat(e.population,")")}})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsxs)(C,{itemId:this.state.selectedPlanet,getData:this.swapi.getPlanet,getImageUrl:this.swapi.getPlanetImage,children:[Object(a.jsx)(D,{field:"population",label:"Population"}),Object(a.jsx)(D,{field:"rotationPeriod",label:"Rotation period"}),Object(a.jsx)(D,{field:"diameter",label:"Diameter"})]})})]})})}}]),n}(r.Component),B=Object(m.e)((function(e){var t=e.history,n=new v;return Object(a.jsx)(b,{children:Object(a.jsx)(S,{onItemSelected:function(e){return t.push(e)},getData:n.getAllStarships,renderItem:function(e){return"".concat(e.name," (").concat(e.model,")")}})})})),U=function(e){var t=e.itemId,n=new v;return Object(a.jsx)(b,{children:Object(a.jsxs)(C,{itemId:t,getData:n.getStarship,getImageUrl:n.getStarshipImage,children:[Object(a.jsx)(D,{field:"model",label:"Model"}),Object(a.jsx)(D,{field:"manufacturer",label:"Manufacturer"}),Object(a.jsx)(D,{field:"costInCredits",label:"Cost in Credits"}),Object(a.jsx)(D,{field:"length",label:"Length"}),Object(a.jsx)(D,{field:"crew",label:"Crew"}),Object(a.jsx)(D,{field:"passengers",label:"Passengers"}),Object(a.jsx)(D,{field:"cargoCapacity",label:"Cargo capacity"})]})})},L=(n(41),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(a.jsx)(b,{children:Object(a.jsx)(j.a,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(f,{}),Object(a.jsx)(N,{}),Object(a.jsx)(m.a,{path:"/",exact:!0,render:function(){return Object(a.jsx)("h2",{children:"Welcome to StarDB"})}}),Object(a.jsx)(m.a,{path:"/people/:id?",component:A}),Object(a.jsx)(m.a,{path:"/planets",component:E}),Object(a.jsx)(m.a,{path:"/starships",exact:!0,component:B}),Object(a.jsx)(m.a,{path:"/starships/:id",render:function(e){var t=e.match.params.id;return Object(a.jsx)(U,{itemId:t})}})]})})})}}]),n}(r.Component));i.a.render(Object(a.jsx)(L,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4d2b0343.chunk.js.map