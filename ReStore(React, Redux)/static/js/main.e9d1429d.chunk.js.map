{"version":3,"sources":["components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","components/main-nav/index.js","components/main-nav/main-nav.js","components/cart/index.js","components/cart/cart.js","components/header/index.js","components/header/header.js","components/pages/home-page/index.js","components/pages/home-page/home-page.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/catalog-page/index.js","components/pages/catalog-page/catalog-page.js","components/pages/cart-page/cart-page.js","components/pages/cart-page/index.js","components/app/index.js","components/app/app.js","services/bookstore-service.js","reducers/booklist.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ErrorIndicator","className","ErrorBoundry","state","hasError","this","setState","props","children","Component","MainNav","to","Cart","numItems","totalPrice","Header","connect","shoppingCart","cartItems","orderTotal","length","HomePage","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","bookstoreService","fetchBooks","dispatch","type","getBooks","then","data","payload","catch","err","bookAddedToCart","bookId","compose","funcs","component","reduceRight","wrapped","f","Spinner","BookListItem","book","onAddedToCart","title","author","price","imageURL","Fragment","src","width","height","alt","onClick","BookList","books","map","id","BookListContainer","loading","error","booklist","CatalogPage","mapDispatchToProps","onDecrease","onIncrease","onDelete","CartPage","items","item","idx","count","total","colSpan","App","path","exact","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBooklist","action","undefined","updateOrder","quantity","find","itemIndex","findIndex","newItems","slice","updateCartItems","updateCartItem","updateOrderTotal","updateShoppingCart","reducer","store","createStore","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.e9d1429d.chunk.js","sourcesContent":["import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;","import React from 'react';\n\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return (\n    <div className='error-indicator'>\n      <span className='boom'>BOOM!</span>\n      <span>Something has gone terribly wrong</span>\n    </div>\n  );\n};\n\nexport default ErrorIndicator;","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;","import React, { Component } from 'react';\n\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({\n      hasError: true\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />\n    }\n\n    return this.props.children;\n  }\n}","import MainNav from './main-nav';\n\nexport default MainNav;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport './main-nav.css';\n\nconst MainNav = () => {\n  return (\n    <nav className='main-nav'>\n      <ul className='main-nav__list'>\n        <li>\n          <Link className='main-nav__link' to='/catalog'>Catalog</Link>\n        </li>\n        <li>\n          <Link className='main-nav__link' to='/cart'>Cart</Link>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\nexport default MainNav;","import Cart from './cart';\n\nexport default Cart;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport './cart.css';\n\nconst Cart = ({ numItems, totalPrice }) => {\n  return (\n    <div className='cart'>\n      <Link className='cart__link' to='/cart'>\n        <i className=\"fa fa-shopping-cart\"></i>\n      </Link>\n      <span className='cart__volume'>{numItems} items</span>\n      <span className='cart__total'>(${totalPrice})</span>\n    </div>\n  );\n};\n\nexport default Cart;","import Header from './header';\n\nexport default Header;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport MainNav from '../main-nav';\nimport Cart from '../cart';\nimport { connect } from 'react-redux';\n\nimport './header.css';\n\nconst Header = ({ numItems, totalPrice }) => {\n  return (\n    <header className='header'>\n      <h1 className='header__title'>\n        <Link className='header__link' to='/'>ReStore</Link>\n      </h1>\n      <MainNav />\n      <Cart numItems={numItems} totalPrice={totalPrice} />\n    </header>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    numItems: cartItems.length,\n    totalPrice: orderTotal\n  }\n};\n\nexport default connect(mapStateToProps)(Header);","import HomePage from './home-page';\n\nexport default HomePage;","import React from 'react';\n\nimport './home-page.css';\n\nconst HomePage = () => {\n  return (\n    <h2>Welcome to ReStore!</h2>\n  );\n};\n\nexport default HomePage;","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n}","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (\n              <Wrapped {...props} bookstoreService={bookstoreService} />\n            );\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  }\n}\n\nexport default withBookstoreService;","const booksLoaded = (newBooks) => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks\n  };\n};\n\nconst booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST'\n  }\n};\n\nconst booksError = (error) => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  }\n};\n\nconst fetchBooks = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nconst bookAddedToCart = (bookId) => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  }\n};\n\nconst bookRemovedFromCart = (bookId) => {\n  return {\n    type: 'BOOK_REMOVED_FROM_CART',\n    payload: bookId\n  }\n};\n\nconst allBooksRemovedFromCart = (bookId) => {\n  return {\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\n    payload: bookId\n  }\n};\n\nexport {\n  fetchBooks,\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart\n};","//Последовательное выполнение функций высшего порядка,\n//указанных в аргументах справа налево, к компоненту\nconst compose = (...funcs) => (component) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), component);\n};\n\nexport default compose;","import Spinner from './spinner';\n\nexport default Spinner;","import React from 'react';\n\nimport './spinner.css';\n\nconst Spinner = () => {\n  return (\n    <div className='spinner'>\n      <div className=\"loadingio-spinner-double-ring-z3dcm6xcrq\">\n        <div className=\"ldio-1c9d5agblt7\">\n          <div></div>\n          <div></div>\n          <div><div></div></div>\n          <div><div></div></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;","import BookListItem from './book-list-item';\n\nexport default BookListItem;","import React from 'react';\n\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, imageURL } = book;\n\n  return (\n    <React.Fragment>\n      <div className='card'>\n        <img className='card__img' src={imageURL} width='50' height='75' alt='book cover'/>\n        <div className='card__info'>\n          <h3 className='card__title'>{title}</h3>\n          <cite className='card__author'>by {author}</cite>\n          <span className='card__price'>${price}</span>\n          <button \n            className='card__btn btn btn-primary'\n            type='button'\n            onClick={onAddedToCart}>Add to cart</button>\n        </div>\n      </div>\n      \n    </React.Fragment>\n  );\n};\n\nexport default BookListItem;","import React, { Component } from 'react';\nimport { withBookstoreService } from '../hoc';\nimport { connect } from 'react-redux';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\nimport BookListItem from '../book-list-item';\n\nimport './book-list.css';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className='book-list'>\n      {\n        books.map((book) => {\n          return (\n            <li key={book.id} className='book-list__item'>\n              <BookListItem \n                book={book} \n                onAddedToCart={() => onAddedToCart(book.id)} />\n            </li>\n          );\n        })\n      }\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) {\n      return <Spinner />\n    }\n\n    if (error) {\n      return <ErrorIndicator />\n    }\n    \n    return <BookList books={books} onAddedToCart={onAddedToCart} />\n  }\n}\n\nconst mapStateToProps = ({ booklist: { books, loading, error } }) => {\n  return {\n    books,\n    loading,\n    error\n  };\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return {\n    fetchBooks: fetchBooks(bookstoreService, dispatch),\n    onAddedToCart: (id) => dispatch(bookAddedToCart(id))\n  };\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);","import BookList from './book-list';\n\nexport default BookList;","import CatalogPage from './catalog-page';\n\nexport default CatalogPage;","import React from 'react';\n\nimport BookListContainer from '../../book-list';\nimport './catalog-page.css';\n\nconst CatalogPage = () => {\n  return <BookListContainer />\n};\n\nexport default CatalogPage;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from '../../../actions';\n\nimport './cart-page.css';\n\nconst CartPage = ({ items, orderTotal, onIncrease, onDecrease, onDelete }) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td>\n          <button \n            className='table__action-btn btn btn-warning'\n            type='button'\n            onClick={() => onDecrease(id)}>\n            <i className='fa fa-minus-circle'></i>\n          </button>\n          <button\n            className='table__action-btn btn btn-success'\n            type='button'\n            onClick={() => onIncrease(id)}>\n            <i className='fa fa-plus-circle'></i>\n          </button>\n          <button\n            className='table__action-btn btn btn-danger'\n            type='button'\n            onClick={() => onDelete(id)}>\n            <i className='fa fa-trash'></i>\n          </button>\n        </td>\n      </tr>\n    );\n  }\n  return (\n    <section className='cart-page'>\n      <h2 className='cart-page__title'>Your Order</h2>\n      <table className='cart-page__table table'>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Total</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            items.map(renderRow)\n          }\n        </tbody>\n        <tfoot>\n          <tr>\n            <td className='table__total' colSpan='5'>Total: ${orderTotal}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </section>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    orderTotal: orderTotal\n  }\n};\n\nconst mapDispatchToProps = {\n  onDecrease: bookRemovedFromCart,\n  onIncrease: bookAddedToCart,\n  onDelete: allBooksRemovedFromCart\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartPage); ","import CartPage from './cart-page';\n\nexport default CartPage;","import App from './app';\n\nexport default App;","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport Header from '../header';\nimport HomePage from '../pages/home-page';\nimport CatalogPage from '../pages/catalog-page';\nimport CartPage from '../pages/cart-page';\n\n\nconst App = () => {\n  return (\n    <div className='container'>\n      <Header />\n\n      <Switch>\n        <Route path='/' exact component={HomePage} />\n        <Route path='/catalog' component={CatalogPage} />\n        <Route path='/cart' component={CartPage} />\n      </Switch>\n    </div>\n  );\n};\n\nexport default App;","export default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: 'Властелин Колец',\n      author: 'Дж. Толкин',\n      price: 10,\n      imageURL: 'https://m.media-amazon.com/images/I/41gqJ6z++uL.jpg'\n    },\n    {\n      id: 2,\n      title: 'Преступление и наказание',\n      author: 'Ф.М. Достоевский',\n      price: 15,\n      imageURL: 'https://m.media-amazon.com/images/I/41MMhlrg2TL.jpg'\n    }\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        //Имитируем ошибку\n        if (Math.random() > 0.75) {\n          reject(new Error('Something gone wrong...'));\n        } else {\n          resolve(this.data);\n        }\n      }, 700);\n    });\n  }\n}","const updateBooklist = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    }\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      }\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    \n    default:\n      return state.booklist;\n  }\n};\n\nexport default updateBooklist;","const updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1)\n    ];\n  }\n\n  if (idx === -1) {\n    return [\n      ...cartItems,\n      item\n    ];\n  }\n\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1)\n  ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, title = book.title, count = 0, total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\n\nconst updateOrderTotal = (cartItems) => {\n  let orderTotal = 0; \n  cartItems.map((item) => {\n    return orderTotal = orderTotal + item.total;\n  });\n  return orderTotal;\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { booklist: {books}, shoppingCart: {cartItems} } = state;\n  const book = books.find(({id}) => id === bookId);\n  const itemIndex = cartItems.findIndex(({id}) => id === bookId);\n  const item = cartItems[itemIndex];\n  \n  const newItem = updateCartItem(book, item, quantity);\n  const newItems = updateCartItems(cartItems, newItem, itemIndex);\n  const newTotal = updateOrderTotal(newItems);\n  \n  return {\n    cartItems: newItems,\n    orderTotal: newTotal\n  }\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    }\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;","import updateBooklist from './booklist';\nimport updateShoppingCart from './shopping-cart';\n\nconst reducer = (state, action) => {\n  return {\n    booklist: updateBooklist(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  }\n};\n\nexport default reducer;","import { createStore } from 'redux';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router} from 'react-router-dom';\n\nimport ErrorBoundry from './components/error-boundry';\nimport App from './components/app';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}