(this["webpackJsonpre-store"]=this["webpackJsonpre-store"]||[]).push([[0],{36:function(t,e,n){},38:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(15),o=n.n(a),i=n(9),s=n(8),l=n(11),j=n(12),d=n(19),u=n(18),b=(n(36),n(1)),O=function(){return Object(b.jsxs)("div",{className:"error-indicator",children:[Object(b.jsx)("span",{className:"boom",children:"BOOM!"}),Object(b.jsx)("span",{children:"Something has gone terribly wrong"})]})},h=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={hasError:!1},t}return Object(j.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)(O,{}):this.props.children}}]),n}(c.Component),m=n(3),f=(n(38),function(){return Object(b.jsx)("nav",{className:"main-nav",children:Object(b.jsxs)("ul",{className:"main-nav__list",children:[Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{className:"main-nav__link",to:"/catalog",children:"Catalog"})}),Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{className:"main-nav__link",to:"/cart",children:"Cart"})})]})})}),x=(n(40),function(t){var e=t.numItems,n=t.totalPrice;return Object(b.jsxs)("div",{className:"cart",children:[Object(b.jsx)(s.b,{className:"cart__link",to:"/cart",children:Object(b.jsx)("i",{className:"fa fa-shopping-cart"})}),Object(b.jsxs)("span",{className:"cart__volume",children:[e," items"]}),Object(b.jsxs)("span",{className:"cart__total",children:["($",n,")"]})]})}),p=(n(41),Object(i.b)((function(t){var e=t.shoppingCart,n=e.cartItems,c=e.orderTotal;return{numItems:n.length,totalPrice:c}}))((function(t){var e=t.numItems,n=t.totalPrice;return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("h1",{className:"header__title",children:Object(b.jsx)(s.b,{className:"header__link",to:"/",children:"ReStore"})}),Object(b.jsx)(f,{}),Object(b.jsx)(x,{numItems:e,totalPrice:n})]})}))),_=(n(42),function(){return Object(b.jsx)("h2",{children:"Welcome to ReStore!"})}),v=n(25),g=r.a.createContext(),k=g.Provider,C=g.Consumer,y=function(){return function(t){return function(e){return Object(b.jsx)(C,{children:function(n){return Object(b.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{bookstoreService:n}))}})}}},N=function(t,e){return function(){e({type:"FETCH_BOOKS_REQUEST"}),t.getBooks().then((function(t){return e({type:"FETCH_BOOKS_SUCCESS",payload:t})})).catch((function(t){return e({type:"FETCH_BOOKS_FAILURE",payload:t})}))}},T=function(t){return{type:"BOOK_ADDED_TO_CART",payload:t}},E=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}},R=(n(43),function(){return Object(b.jsx)("div",{className:"spinner",children:Object(b.jsx)("div",{className:"loadingio-spinner-double-ring-z3dcm6xcrq",children:Object(b.jsxs)("div",{className:"ldio-1c9d5agblt7",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{})}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{})})]})})})}),S=(n(44),function(t){var e=t.book,n=t.onAddedToCart,c=e.title,a=e.author,o=e.price,i=e.imageURL;return Object(b.jsx)(r.a.Fragment,{children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{className:"card__img",src:i,width:"50",height:"75",alt:"book cover"}),Object(b.jsxs)("div",{className:"card__info",children:[Object(b.jsx)("h3",{className:"card__title",children:c}),Object(b.jsxs)("cite",{className:"card__author",children:["by ",a]}),Object(b.jsxs)("span",{className:"card__price",children:["$",o]}),Object(b.jsx)("button",{className:"card__btn btn btn-primary",type:"button",onClick:n,children:"Add to cart"})]})]})})}),A=(n(45),function(t){var e=t.books,n=t.onAddedToCart;return Object(b.jsx)("ul",{className:"book-list",children:e.map((function(t){return Object(b.jsx)("li",{className:"book-list__item",children:Object(b.jsx)(S,{book:t,onAddedToCart:function(){return n(t.id)}})},t.id)}))})}),I=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var t=this.props,e=t.books,n=t.loading,c=t.error,r=t.onAddedToCart;return n?Object(b.jsx)(R,{}):c?Object(b.jsx)(O,{}):Object(b.jsx)(A,{books:e,onAddedToCart:r})}}]),n}(c.Component),B=E(y(),Object(i.b)((function(t){var e=t.booklist;return{books:e.books,loading:e.loading,error:e.error}}),(function(t,e){var n=e.bookstoreService;return{fetchBooks:N(n,t),onAddedToCart:function(e){return t(T(e))}}})))(I),D=(n(46),function(){return Object(b.jsx)(B,{})}),w=(n(47),{onDecrease:function(t){return{type:"BOOK_REMOVED_FROM_CART",payload:t}},onIncrease:T,onDelete:function(t){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:t}}}),F=Object(i.b)((function(t){var e=t.shoppingCart;return{items:e.cartItems,orderTotal:e.orderTotal}}),w)((function(t){var e=t.items,n=t.orderTotal,c=t.onIncrease,r=t.onDecrease,a=t.onDelete;return Object(b.jsxs)("section",{className:"cart-page",children:[Object(b.jsx)("h2",{className:"cart-page__title",children:"Your Order"}),Object(b.jsxs)("table",{className:"cart-page__table table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"#"}),Object(b.jsx)("th",{children:"Item"}),Object(b.jsx)("th",{children:"Count"}),Object(b.jsx)("th",{children:"Total"}),Object(b.jsx)("th",{children:"Action"})]})}),Object(b.jsx)("tbody",{children:e.map((function(t,e){var n=t.id,o=t.title,i=t.count,s=t.total;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e+1}),Object(b.jsx)("td",{children:o}),Object(b.jsx)("td",{children:i}),Object(b.jsxs)("td",{children:["$",s]}),Object(b.jsxs)("td",{children:[Object(b.jsx)("button",{className:"table__action-btn btn btn-warning",type:"button",onClick:function(){return r(n)},children:Object(b.jsx)("i",{className:"fa fa-minus-circle"})}),Object(b.jsx)("button",{className:"table__action-btn btn btn-success",type:"button",onClick:function(){return c(n)},children:Object(b.jsx)("i",{className:"fa fa-plus-circle"})}),Object(b.jsx)("button",{className:"table__action-btn btn btn-danger",type:"button",onClick:function(){return a(n)},children:Object(b.jsx)("i",{className:"fa fa-trash"})})]})]},n)}))}),Object(b.jsx)("tfoot",{children:Object(b.jsx)("tr",{children:Object(b.jsxs)("td",{className:"table__total",colSpan:"5",children:["Total: $",n]})})})]})]})})),M=function(){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(p,{}),Object(b.jsxs)(m.c,{children:[Object(b.jsx)(m.a,{path:"/",exact:!0,component:_}),Object(b.jsx)(m.a,{path:"/catalog",component:D}),Object(b.jsx)(m.a,{path:"/cart",component:F})]})]})},K=function(){function t(){Object(l.a)(this,t),this.data=[{id:1,title:"\u0412\u043b\u0430\u0441\u0442\u0435\u043b\u0438\u043d \u041a\u043e\u043b\u0435\u0446",author:"\u0414\u0436. \u0422\u043e\u043b\u043a\u0438\u043d",price:10,imageURL:"https://m.media-amazon.com/images/I/41gqJ6z++uL.jpg"},{id:2,title:"\u041f\u0440\u0435\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435",author:"\u0424.\u041c. \u0414\u043e\u0441\u0442\u043e\u0435\u0432\u0441\u043a\u0438\u0439",price:15,imageURL:"https://m.media-amazon.com/images/I/41MMhlrg2TL.jpg"}]}return Object(j.a)(t,[{key:"getBooks",value:function(){var t=this;return new Promise((function(e,n){setTimeout((function(){Math.random()>.75?n(new Error("Something gone wrong...")):e(t.data)}),700)}))}}]),t}(),L=n(17),U=function(t,e){if(void 0===t)return{books:[],loading:!0,error:null};switch(e.type){case"FETCH_BOOKS_REQUEST":return{books:[],loading:!0,error:null};case"FETCH_BOOKS_SUCCESS":return{books:e.payload,loading:!1,error:null};case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,error:e.payload};default:return t.booklist}},H=n(13),P=function(t,e,n){var c=t.booklist.books,r=t.shoppingCart.cartItems,a=c.find((function(t){return t.id===e})),o=r.findIndex((function(t){return t.id===e})),i=function(t,e,n){return 0===e.count?[].concat(Object(H.a)(t.slice(0,n)),Object(H.a)(t.slice(n+1))):-1===n?[].concat(Object(H.a)(t),[e]):[].concat(Object(H.a)(t.slice(0,n)),[e],Object(H.a)(t.slice(n+1)))}(r,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=e.id,r=void 0===c?t.id:c,a=e.title,o=void 0===a?t.title:a,i=e.count,s=void 0===i?0:i,l=e.total;return{id:r,title:o,count:s+n,total:(void 0===l?0:l)+n*t.price}}(a,r[o],n),o);return{cartItems:i,orderTotal:function(t){var e=0;return t.map((function(t){return e+=t.total})),e}(i)}},z=function(t,e){if(void 0===t)return{cartItems:[],orderTotal:0};switch(e.type){case"BOOK_ADDED_TO_CART":return P(t,e.payload,1);case"BOOK_REMOVED_FROM_CART":return P(t,e.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var n=t.shoppingCart.cartItems.find((function(t){return t.id===e.payload}));return P(t,e.payload,-n.count);default:return t.shoppingCart}},V=function(t,e){return{booklist:U(t,e),shoppingCart:z(t,e)}},$=Object(L.b)(V),J=new K;o.a.render(Object(b.jsx)(i.a,{store:$,children:Object(b.jsx)(h,{children:Object(b.jsx)(k,{value:J,children:Object(b.jsx)(s.a,{children:Object(b.jsx)(M,{})})})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.e9d1429d.chunk.js.map